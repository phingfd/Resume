import{C as ne,D as Q,_ as oe,E as se,F as R,G as me,H as fe,B as ve,r as X,m as Z,z as ae,I as he,c as ie,J as ge,a as ye,K as be,L as we,y as _e,M as xe,N as $e,O as ke,g as Ce,P as Ae}from"./n2dc525b.js";import{_ as Be}from"./ncheckbox.vue-m6od5ntc.js";import{_ as Pe}from"./ndropdown.vue-e8of1w4q.js";import{_ as Ve}from"./nnavbar.vue-mt44hnfg.js";import{p as W,f as T,ag as le,P as f,a1 as a,X as Y,u as y,aa as q,a3 as v,Q as l,a9 as S,F as L,ae as J,S as z,R as U,a2 as A,q as I,V as re,a8 as F,U as De,C as je,an as ze,W as Se}from"./vendor/json-editor-vue-llkaejaf.js";import{_ as Fe}from"./nsection-block-blzeji2j.js";import{_ as Ne}from"./filepath-item.vue-csqbsvc3.js";import{_ as Ue}from"./code-snippets.vue-kiughdhz.js";import{_ as Ie}from"./ndrawer.vue-m60bsg9x.js";import{D as Oe}from"./constants-b32h69zq.js";import"./vendor/unocss-mvzv9iuf.js";import"./vendor/shiki-kdj4mcqm.js";import"./nicon-title.vue-dsf9ygne.js";import"./ncode-block.vue-bir2wz4z.js";import"./client-gsjyqe32.js";const Te={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},Ee={for:"drop-zone-input","text-3xl":"",hover:"text-green cursor-pointer","transition-all":""},Me={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},Le={grid:"~ cols-minmax-8rem gap-8","overflow-auto":"",p6:""},Re={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Ke=["src"],qe={flex:"~ gap1","items-center":""},Ge={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},Je=W({__name:"AssetDropZone",props:{modelValue:{type:Boolean,required:!0},folder:{type:String,required:!0}},setup(w){const s=w,e=ne(s,"modelValue"),o=T(),n=T([]);function i(u){o.value=u.target,e.value=!0}function r(u){u.target===o.value&&(e.value=!1)}function _(u){u.preventDefault()}function g(u){u.preventDefault(),b(u.dataTransfer.files)}function b(u){const c=Array.from(u||[]);if(c.length){const $=[],x=n.value.map(p=>p.name);for(const p of c)if(x.includes(p.name)){let B=1;const[P,E]=p.name.split(".");for(;x.includes(`${P} (${B}).${E}`);)B++;const K=`${P}-${B}.${E}`,m=new Blob([p],{type:p.type}),t=new File([m],K,{lastModified:Date.now()});$.push(t),x.push(K)}else p.type===""&&R({message:"Folders are not supported yet",icon:"carbon:face-dissatisfied",classes:"text-orange"}),$.push(p);n.value=[...n.value,...$]}}async function D(){if(me.value||fe.value)return;ve("assets:upload");const u=[];for(const c of n.value){const $=new FileReader;$.readAsDataURL(c);const p=(await new Promise(B=>{$.onload=()=>B($.result)})).split(";base64,").pop();u.push({path:c.name,encoding:"base64",content:p})}await X.writeStaticAssets(await Z(),[...u],s.folder).then(()=>{h(),R({message:"Files uploaded successfully!",icon:"i-carbon:checkmark"})}).catch(c=>{h(),R({message:`Error uploading files: ${c?.message??"unknown"}`,icon:"i-carbon-warning",classes:"text-red"})}),e.value=!1}function M(u){n.value?.splice(u,1)}function k(u){return URL.createObjectURL(u)}function C(u,c){const[$,x]=u.name.split("."),p=c.replace(/\.\w+$/,""),B=`${p}.${x}`;return p.length===0?(alert("File name must be at least 1 characters long"),$):(Object.defineProperty(u,"name",{value:B,writable:!1}),n.value.splice(n.value.indexOf(u),1,u),u)}function d(){n.value=[]}function h(){e.value=!1,d()}return Q("dragenter",i),Q("dragleave",r),Q("dragover",_),Q("drop",g),(u,c)=>{const $=oe,x=se,p=ae,B=le("tooltip");return a(),f("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:Y(y(e)?"opacity-100 visible":"opacity-0 invisible")},[q(v($,{icon:"carbon-close",title:"Close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",border:!1,onClick:h},null,512),[[B,"Close",void 0,{"bottom-end":!0}]]),n.value?.length?(a(),f("div",Me,[c[4]||(c[4]=l("div",{px6:"",py6:""},[l("h1",{"text-2xl":""}," Upload "),l("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1)),l("div",Le,[(a(!0),f(L,null,J(n.value,(P,E)=>(a(),f("div",{key:P.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[l("div",Re,[l("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:k(P)},null,8,Ke)]),l("div",qe,[v(p,{n:"xs","h-full":"","flex-auto":"","model-value":P.name,"onUpdate:modelValue":K=>C(P,K.target.value)},null,8,["model-value","onUpdate:modelValue"]),v($,{n:"red",icon:"carbon-trash-can","h-full":"","flex-none":"",title:"Remove file",onClick:K=>M(E)},null,8,["onClick"])])]))),128))]),l("div",Ge,[n.value.length?(a(),z($,{key:0,n:"red",onClick:d},{default:A(()=>[v(x,{icon:"carbon-clean"}),c[2]||(c[2]=S(" Clear "))]),_:1})):U("",!0),v($,{disabled:!n.value.length,n:"primary solid",onClick:D},{default:A(()=>[v(x,{icon:"carbon-cloud-upload"}),c[3]||(c[3]=S(" Upload "))]),_:1},8,["disabled"])])])):(a(),f("div",Te,[l("label",Ee,[v(x,{icon:"carbon-cloud-upload","mr-2":""}),c[1]||(c[1]=S(" Drop files here or click to select "))]),l("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:c[0]||(c[0]=P=>b(P.target.files))},null,32)]))],2)}}});function We(w){return typeof w=="string"?`'${w}'`:new Xe().serialize(w)}const Xe=function(){class w{#e=new Map;compare(e,o){const n=typeof e,i=typeof o;return n==="string"&&i==="string"?e.localeCompare(o):n==="number"&&i==="number"?e-o:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(o,!0))}serialize(e,o){if(e===null)return"null";switch(typeof e){case"string":return o?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const o=Object.prototype.toString.call(e);if(o!=="[object Object]")return this.serializeBuiltInType(o.length<10?`unknown:${o}`:o.slice(8,-1),e);const n=e.constructor,i=n===Object||n===void 0?"":n.name;if(i!==""&&globalThis[i]===n)return this.serializeBuiltInType(i,e);if(typeof e.toJSON=="function"){const r=e.toJSON();return i+(r!==null&&typeof r=="object"?this.$object(r):`(${this.serialize(r)})`)}return this.serializeObjectEntries(i,Object.entries(e))}serializeBuiltInType(e,o){const n=this["$"+e];if(n)return n.call(this,o);if(typeof o?.entries=="function")return this.serializeObjectEntries(e,o.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,o){const n=Array.from(o).sort((r,_)=>this.compare(r[0],_[0]));let i=`${e}{`;for(let r=0;r<n.length;r++){const[_,g]=n[r];i+=`${this.serialize(_,!0)}:${this.serialize(g)}`,r<n.length-1&&(i+=",")}return i+"}"}$object(e){let o=this.#e.get(e);return o===void 0&&(this.#e.set(e,`#${this.#e.size}`),o=this.serializeObject(e),this.#e.set(e,o)),o}$function(e){const o=Function.prototype.toString.call(e);return o.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${o.replace(/\s*\n\s*/g,"")}`}$Array(e){let o="[";for(let n=0;n<e.length;n++)o+=this.serialize(e[n]),n<e.length-1&&(o+=",");return o+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((o,n)=>this.compare(o,n)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const s of["Error","RegExp","URL"])w.prototype["$"+s]=function(e){return`${s}(${e})`};for(const s of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])w.prototype["$"+s]=function(e){return`${s}[${e.join(",")}]`};for(const s of["BigInt64Array","BigUint64Array"])w.prototype["$"+s]=function(e){return`${s}[${e.join("n,")}${e.length>0?"n":""}]`};return w}(),Ze=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],He=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",G=[];class Ye{_data=new H;_hash=new H([...Ze]);_nDataBytes=0;_minBufferSize=0;finalize(s){s&&this._append(s);const e=this._nDataBytes*8,o=this._data.sigBytes*8;return this._data.words[o>>>5]|=128<<24-o%32,this._data.words[(o+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(o+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(s,e){const o=this._hash.words;let n=o[0],i=o[1],r=o[2],_=o[3],g=o[4],b=o[5],D=o[6],M=o[7];for(let k=0;k<64;k++){if(k<16)G[k]=s[e+k]|0;else{const x=G[k-15],p=(x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3,B=G[k-2],P=(B<<15|B>>>17)^(B<<13|B>>>19)^B>>>10;G[k]=p+G[k-7]+P+G[k-16]}const C=g&b^~g&D,d=n&i^n&r^i&r,h=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),u=(g<<26|g>>>6)^(g<<21|g>>>11)^(g<<7|g>>>25),c=M+u+C+He[k]+G[k],$=h+d;M=D,D=b,b=g,g=_+c|0,_=r,r=i,i=n,n=c+$|0}o[0]=o[0]+n|0,o[1]=o[1]+i|0,o[2]=o[2]+r|0,o[3]=o[3]+_|0,o[4]=o[4]+g|0,o[5]=o[5]+b|0,o[6]=o[6]+D|0,o[7]=o[7]+M|0}_append(s){typeof s=="string"&&(s=H.fromUtf8(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_process(s){let e,o=this._data.sigBytes/64;s?o=Math.ceil(o):o=Math.max((o|0)-this._minBufferSize,0);const n=o*16,i=Math.min(n*4,this._data.sigBytes);if(n){for(let r=0;r<n;r+=16)this._doProcessBlock(this._data.words,r);e=this._data.words.splice(0,n),this._data.sigBytes-=i}return new H(e,i)}}class H{words;sigBytes;constructor(s,e){s=this.words=s||[],this.sigBytes=e===void 0?s.length*4:e}static fromUtf8(s){const e=unescape(encodeURIComponent(s)),o=e.length,n=[];for(let i=0;i<o;i++)n[i>>>2]|=(e.charCodeAt(i)&255)<<24-i%4*8;return new H(n,o)}toBase64(){const s=[];for(let e=0;e<this.sigBytes;e+=3){const o=this.words[e>>>2]>>>24-e%4*8&255,n=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,i=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,r=o<<16|n<<8|i;for(let _=0;_<4&&e*8+_*6<this.sigBytes*8;_++)s.push(Qe.charAt(r>>>6*(3-_)&63))}return s.join("")}concat(s){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<s.sigBytes;e++){const o=s.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=o<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<s.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=s.words[e>>>2];this.sigBytes+=s.sigBytes}}function et(w){return new Ye().finalize(w).toBase64()}function tt(w){return et(We(w))}const nt=W({__name:"AssetFontPreview",props:{asset:{}},setup(w){const s=w,e=I(()=>`devtools-assets-${tt(s.asset)}`);return he(I(()=>`
  @font-face {
    font-family: '${e.value}';
    src: url('${s.asset.publicPath}');
  }
`)),(o,n)=>(a(),f("div",{"of-hidden":"",style:re({fontFamily:`'${e.value}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),ot={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},st=["src"],lt={key:2,"i-carbon-document":"","text-3xl":"",op20:""},it={key:3,"w-full":"","self-start":"",p4:""},at=["textContent"],rt={key:4},ut=["src","autoplay","controls"],dt={key:5},ct={key:0,"i-carbon-volume-up":"","text-3xl":"",op20:""},pt=["src"],mt={key:6,"i-carbon-help":"","text-3xl":"",op20:""},ue=W({__name:"AssetPreview",props:{asset:{},textContent:{},detail:{type:Boolean}},setup(w){return(s,e)=>{const o=nt;return a(),f("div",ot,[s.asset.type==="image"?(a(),f("img",{key:0,src:s.asset.publicPath},null,8,st)):s.asset.type==="font"?(a(),z(o,{key:s.asset.publicPath,asset:s.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):s.asset.type==="text"&&!s.textContent?(a(),f("div",lt)):s.asset.type==="text"&&s.textContent?(a(),f("div",it,[l("pre",{"max-h-10rem":"","of-hidden":"","text-xs":"","font-mono":"",textContent:F(s.textContent)},null,8,at)])):s.asset.type==="video"?(a(),f("div",rt,[l("video",{src:s.asset.publicPath,autoplay:s.detail,controls:s.detail},null,8,ut)])):s.asset.type==="audio"?(a(),f("div",dt,[s.detail?(a(),f("audio",{key:1,src:s.asset.publicPath,controls:""},null,8,pt)):(a(),f("div",ct))])):(a(),f("div",mt))])}}}),ft={relative:"",flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},vt={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},ht=W({__name:"AssetGridItem",props:{asset:{},folder:{}},setup(w){const s=w,e=I(()=>s.folder&&s.asset.path.startsWith(s.folder)?s.asset.path.slice(s.folder.length):s.asset.path);return(o,n)=>{const i=se,r=ue;return a(),f("button",ft,[o.asset.layer?(a(),z(i,{key:0,icon:"i-carbon-layers",absolute:"","right-4":"","top-4":"","bg-primary":""})):U("",!0),v(r,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:o.asset},null,8,["asset"]),l("div",vt,F(e.value),1)])}}}),de=W({__name:"AssetListItem",props:{item:{},index:{default:0},modelValue:{}},setup(w,{emit:s}){const e=w,n=ne(e,"modelValue",s,{passive:!0}),i=I(()=>e.item?.children?.length),r=T(!0),_=I(()=>i.value?"i-carbon-folder":e.item.type==="image"?"i-carbon-image":e.item.type==="video"?"i-carbon-video":e.item.type==="audio"?"i-carbon-volume-up":e.item.type==="font"?"i-carbon-text-small-caps":e.item.type==="text"?"i-carbon-document":e.item.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(g,b)=>{const D=se,M=de;return a(),f("div",null,[l("button",{flex:"~ gap-2","w-full":"","items-center":"",hover:"bg-active",px4:"",py1:"",style:re({paddingLeft:`calc(1rem + ${g.index*1.5}em)`}),class:Y({"bg-active":!i.value&&y(n)?.filePath===g.item?.filePath}),border:"b base",onClick:b[0]||(b[0]=k=>i.value?r.value=!r.value:n.value=g.item)},[l("div",{class:Y(_.value)},null,2),l("span",{class:Y({"flex items-center":i.value}),"flex-auto":"","text-start":"","text-sm":"","font-mono":""},[S(F(g.item.path)+" ",1),g.item.layer?(a(),z(D,{key:0,icon:"i-carbon-layers","bg-primary":""})):U("",!0)],2),i.value?(a(),z(D,{key:0,icon:"carbon:chevron-right","transform-rotate":r.value?90:0,transition:""},null,8,["transform-rotate"])):U("",!0)],6),r.value?De(g.$slots,"default",{key:0},()=>[(a(!0),f(L,null,J(g.item?.children,k=>(a(),z(M,{key:k.filepath,modelValue:y(n),"onUpdate:modelValue":b[1]||(b[1]=C=>je(n)?n.value=C:null),item:k,index:g.index+1},null,8,["modelValue","item","index"]))),128))]):U("",!0)])}}}),gt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},yt={flex:"~","items-center":"","justify-center":""},bt={"max-w-full":"","w-full":"","table-fixed":""},wt={flex:"~ gap-1","w-full":"","items-center":""},_t={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},xt={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},$t={capitalize:""},kt={key:0},Ct={op70:""},At={flex:"~ gap2 wrap"},Bt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},Pt={flex:"~ gap2 wrap justify-center"},Vt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},Dt={flex:"~ gap2 wrap justify-center"},jt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},zt={flex:"","justify-end":"","gap-4":""},St=W({__name:"AssetDetails",props:{modelValue:{}},setup(w,{emit:s}){const n=ne(w,"modelValue",s,{passive:!0}),i=ie(async()=>{if(n.value.type==="image")return X.getImageMeta(await Z(),n.value.filePath)}),r=T(!1),_=T(),g=T(0),b=ie(async()=>{if(n.value.type!=="text")return;g.value;const m=await X.getTextAssetContent(await Z(),n.value.filePath);return _.value=m,m});async function D(){if(b.value!==_.value)try{await X.writeStaticAssets(await Z(),[{path:n.value.path,content:_.value,override:!0}],""),r.value=!1,g.value++,R({message:"Updated",icon:"i-carbon-checkmark",classes:"text-green"})}catch(m){console.error(m),R({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const M=ge(),k=I(()=>(M.value?._installedModules||[]).some(t=>t.meta?.name==="@nuxt/image"||t.meta?.name==="@nuxt/image-edge"||t.meta?.name==="@nuxt/image-nightly")),C=I(()=>{const m=[];if(n.value.type==="image"){const t=i.value?.width?`
  width="${i.value.width}"
  height="${i.value.height}" `:" ";return m.push({lang:"vue-html",code:`<img${t}
  src="${n.value.publicPath}"
/>`,name:"Plain Image"}),k.value&&m.push({lang:"vue-html",code:`<NuxtImg${t}
  src="${n.value.publicPath}"
/>`,name:"Nuxt Img",docs:"https://image.nuxt.com/usage/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${t}
  src="${n.value.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxt.com/usage/nuxt-picture"}),m}return m.push({lang:"html",code:`<a download href="${n.value.publicPath}">
  Download ${n.value.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),m}),d=ye(),h=be(),u=we(()=>n.value.mtime),c=I(()=>{const m=n.value.size;return m<1024?`${m} B`:m<1024*1024?`${(m/1024).toFixed(2)} KB`:`${(m/1024/1024).toFixed(2)} MB`}),$=I(()=>{if(!i.value?.width||!i.value?.height)return"";const m=(V,O)=>O?m(O,V%O):V,t=m(i.value.width,i.value.height);return t>3?`${i.value.width/t}:${i.value.height/t}`:""}),x=I(()=>["image","text","video","audio","font"].includes(n.value.type)),p=T(!1);async function B(){try{await X.deleteStaticAsset(await Z(),n.value.filePath),n.value=void 0,p.value=!1,R({message:"Asset deleted",icon:"i-carbon-checkmark",classes:"text-green"})}catch(m){console.error(m),R({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const P=T(!1),E=T("");async function K(){const m=n.value.filePath.split("/"),t=m.slice(-1)[0].split(".").slice(0,-1).join(".");if(!E.value||E.value===t)return R({message:"Please enter a new name",icon:"i-carbon-warning",classes:"text-orange"});try{const V=m.slice(-1)[0].split(".").slice(-1)[0],O=`${m.slice(0,-1).join("/")}/${E.value}.${V}`;await X.renameStaticAsset(await Z(),n.value.filePath,O),n.value=void 0,P.value=!1,R({message:"Asset renamed",icon:"i-carbon-checkmark",classes:"text-green"})}catch(V){console.error(V),R({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}return(m,t)=>{const V=ue,O=Ne,N=oe,ce=Ue,ee=_e,pe=ae,te=le("tooltip");return a(),f(L,null,[l("div",gt,[x.value?(a(),f(L,{key:0},[t[13]||(t[13]=l("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[l("div",{"x-divider":""}),l("div",{"flex-none":""}," Preview "),l("div",{"x-divider":""})],-1)),l("div",yt,[v(V,{detail:"","max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:y(n),"text-content":y(b)},null,8,["asset","text-content"])])],64)):U("",!0),t[25]||(t[25]=l("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[l("div",{"x-divider":""}),l("div",{"flex-none":""}," Details "),l("div",{"x-divider":""})],-1)),l("table",bt,[l("tbody",null,[l("tr",null,[t[14]||(t[14]=l("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1)),l("td",null,[l("div",wt,[v(O,{filepath:y(n).filePath,"text-left":""},null,8,["filepath"]),q(v(N,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",border:!1,onClick:t[0]||(t[0]=j=>y(h)(y(n).filePath))},null,512),[[te,"Open in Editor"]])])])]),l("tr",null,[t[15]||(t[15]=l("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1)),l("td",null,[l("div",_t,[l("div",xt,F(y(n).publicPath),1),q(v(N,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",border:!1,onClick:t[1]||(t[1]=j=>y(d)(y(n).publicPath,"assets-public-path"))},null,512),[[te,"Copy public path"]]),q(v(N,{"flex-none":"",to:y(n).publicPath,icon:"carbon-launch",target:"_blank",border:!1,title:"Open in browser"},null,8,["to"]),[[te,"Open in browser"]])])])]),l("tr",null,[t[16]||(t[16]=l("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1)),l("td",$t,F(y(n).type),1)]),y(i)?.width?(a(),f(L,{key:0},[l("tr",null,[t[17]||(t[17]=l("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1)),l("td",null,F(y(i).width)+" x "+F(y(i).height),1)]),$.value?(a(),f("tr",kt,[t[18]||(t[18]=l("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1)),l("td",null,F($.value),1)])):U("",!0)],64)):U("",!0),l("tr",null,[t[19]||(t[19]=l("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1)),l("td",null,F(c.value),1)]),l("tr",null,[t[20]||(t[20]=l("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1)),l("td",null,[S(F(new Date(y(n).mtime).toLocaleString())+" ",1),l("span",Ct,"("+F(y(u))+")",1)])])])]),t[26]||(t[26]=l("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[l("div",{"x-divider":""}),l("div",{"flex-none":""}," Actions "),l("div",{"x-divider":""})],-1)),l("div",At,[v(N,{to:y(n).publicPath,download:"",target:"_blank",icon:"carbon-download",n:"green"},{default:A(()=>t[21]||(t[21]=[S(" Download ")])),_:1},8,["to"]),y(n).type==="text"?(a(),z(N,{key:0,icon:"carbon-edit",n:"cyan",onClick:t[2]||(t[2]=j=>r.value=!r.value)},{default:A(()=>t[22]||(t[22]=[S(" Edit ")])),_:1})):U("",!0),v(N,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:t[3]||(t[3]=j=>P.value=!P.value)},{default:A(()=>t[23]||(t[23]=[S(" Rename ")])),_:1}),v(N,{icon:"carbon-delete",n:"red",onClick:t[4]||(t[4]=j=>p.value=!p.value)},{default:A(()=>t[24]||(t[24]=[S(" Delete ")])),_:1})]),t[27]||(t[27]=l("div",{"flex-auto":""},null,-1)),C.value.length?(a(),z(ce,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":C.value},null,8,["code-snippets"])):U("",!0)]),v(ee,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=j=>p.value=j)},{default:A(()=>[l("div",Bt,[t[30]||(t[30]=l("span",null," Are you sure you want to delete this asset? ",-1)),l("div",Pt,[v(N,{icon:"carbon-close",onClick:t[5]||(t[5]=j=>p.value=!1)},{default:A(()=>t[28]||(t[28]=[S(" Cancel ")])),_:1}),v(N,{icon:"carbon-delete",n:"red",onClick:B},{default:A(()=>t[29]||(t[29]=[S(" Delete ")])),_:1})])])]),_:1},8,["modelValue"]),v(ee,{modelValue:P.value,"onUpdate:modelValue":t[9]||(t[9]=j=>P.value=j)},{default:A(()=>[l("div",Vt,[v(pe,{modelValue:E.value,"onUpdate:modelValue":t[7]||(t[7]=j=>E.value=j),placeholder:"New name",n:"blue"},null,8,["modelValue"]),l("div",Dt,[v(N,{icon:"carbon-close",onClick:t[8]||(t[8]=j=>P.value=!1)},{default:A(()=>t[31]||(t[31]=[S(" Cancel ")])),_:1}),v(N,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:K},{default:A(()=>t[32]||(t[32]=[S(" Rename ")])),_:1})])])]),_:1},8,["modelValue"]),y(n).type==="text"?(a(),z(ee,{key:0,modelValue:r.value,"onUpdate:modelValue":t[12]||(t[12]=j=>r.value=j)},{default:A(()=>[l("div",jt,[q(l("textarea",{"onUpdate:modelValue":t[10]||(t[10]=j=>_.value=j),placeholder:"Item value...",class:"h-lg w-xl of-auto rounded-lg p-4 text-sm font-mono outline-none",onKeydown:Se(D,["enter"])},null,544),[[ze,_.value]]),l("div",zt,[v(N,{icon:"carbon-close",onClick:t[11]||(t[11]=j=>r.value=!1)},{default:A(()=>t[33]||(t[33]=[S(" Cancel ")])),_:1}),v(N,{icon:"carbon:save",n:"primary",onClick:D},{default:A(()=>t[34]||(t[34]=[S(" save ")])),_:1})])])]),_:1},8,["modelValue"])):U("",!0)],64)}}}),Ft={"h-full":"","of-auto":""},Nt={"flex-none":"",flex:"~ gap2 items-center","text-lg":""},Ut={flex:"~ items-center justify-center",absolute:"","bottom--1":"","right--1":"","h-4":"","w-4":"","rounded-full":"","bg-primary:30":"","text-8px":""},It={flex:"~ col","w-30":"","of-auto":""},Ot={"text-xs":"",op75:""},Tt={op50:""},Et={key:0},Mt={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},Lt={key:1,p2:"",grid:"~ cols-minmax-8rem"},Rt={key:1},ln=W({__name:"assets",setup(w){const s=xe(),e=T(!1),o=T(""),n=I(()=>new $e(s.value||[],{keys:["path"]})),i=ke(()=>{const C=[];for(const d of s.value||[]){const h=d.path.split(".").pop();h&&!C.find(u=>u.name===h)&&C.push({name:h,value:!0})}return C}),r=I(()=>(o.value?n.value.search(o.value).map(d=>d.item):s.value||[]).filter(d=>{const h=d.path.split(".").pop();return!h||i.some(u=>u.name===h&&u.value)})),_=I(()=>{const C={};for(const d of r.value){const h=`${d.path.split("/").slice(0,-1).join("/")}/`;C[h]||(C[h]=[]),C[h].push(d)}return Object.entries(C).sort(([d],[h])=>d.localeCompare(h))}),g=I(()=>{const C={children:[]},d=(h,u,c)=>{const[$,...x]=u;let p=h.children.find(B=>B.path===$);p||(p={...c,path:$,children:[]},h.children.push(p)),x.length>1?d(p,x,c):x.length===1&&p.children.push({...c,path:x[0]})};return r.value.forEach(h=>{const u=h.path.split("/").filter(c=>c!=="");d(C,u,h)}),C.children}),b=T(),{view:D}=Ce("assets");function M(){D.value=D.value==="list"?"grid":"list"}Ae("Escape",()=>{b.value=void 0});const k=T();return(C,d)=>{const h=oe,u=Be,c=Pe,$=Ve,x=Je,p=ht,B=Fe,P=de,E=St,K=Ie,m=le("tooltip");return a(),f("div",Ft,[v($,{ref_key:"navbar",ref:k,search:o.value,"onUpdate:search":d[1]||(d[1]=t=>o.value=t),pb2:""},{actions:A(()=>[l("div",Nt,[q(v(h,{icon:"carbon:cloud-upload",title:"File Upload",border:!1,onClick:d[0]||(d[0]=t=>e.value=!e.value)},null,512),[[m,"File Upload",void 0,{"bottom-end":!0}]]),y(i).length?(a(),z(c,{key:0,direction:"end",n:"sm primary"},{trigger:A(({click:t})=>[q(v(h,{icon:"carbon-filter",border:!1,title:"Filter",p3:"","text-lg":"",onClick:V=>t()},null,8,["onClick"]),[[m,"Filter",void 0,{"bottom-end":!0}]]),l("span",Ut,F(y(i).length),1)]),default:A(()=>[l("div",It,[(a(!0),f(L,null,J(y(i),t=>(a(),z(u,{key:t.name,modelValue:t.value,"onUpdate:modelValue":V=>t.value=V,flex:"~ gap-2",rounded:"",px2:"",py2:""},{default:A(()=>[l("span",Ot,F(t.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])]),_:1})):U("",!0),q(v(h,{"text-lg":"",border:!1,icon:y(D)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:M},null,8,["icon"]),[[m,"Toggle View",void 0,{"bottom-end":!0}]])])]),default:A(()=>[l("div",Tt,[o.value?(a(),f("span",Et,F(r.value.length)+" matched · ",1)):U("",!0),l("span",null,F(y(s)?.length)+" assets in total",1)])]),_:1},8,["search"]),v(x,{modelValue:e.value,"onUpdate:modelValue":d[2]||(d[2]=t=>e.value=t),folder:"/"},null,8,["modelValue"]),y(D)==="grid"?(a(),f(L,{key:0},[_.value.length>1?(a(!0),f(L,{key:0},J(_.value,([t,V])=>(a(),z(B,{key:t,text:t,description:`${V.length} items`,open:V.length<=y(Oe),padding:!1},{default:A(()=>[l("div",Mt,[(a(!0),f(L,null,J(V,O=>(a(),z(p,{key:O.path,asset:O,folder:t,onClick:N=>b.value=O},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(a(),f("div",Lt,[(a(!0),f(L,null,J(r.value,t=>(a(),z(p,{key:t.path,asset:t,onClick:V=>b.value=t},null,8,["asset","onClick"]))),128))]))],64)):(a(),f("div",Rt,[(a(!0),f(L,null,J(g.value,(t,V)=>(a(),z(P,{key:V,modelValue:b.value,"onUpdate:modelValue":d[3]||(d[3]=O=>b.value=O),item:t},null,8,["modelValue","item"]))),128))])),v(K,{"model-value":!!b.value,"auto-close":"","w-120":"",top:k.value,onClose:d[5]||(d[5]=t=>b.value=void 0)},{default:A(()=>[b.value?(a(),z(E,{key:0,modelValue:b.value,"onUpdate:modelValue":d[4]||(d[4]=t=>b.value=t)},null,8,["modelValue"])):U("",!0)]),_:1},8,["model-value","top"])])}}});export{ln as default};
